<!doctype html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Nghiệm Gửi Bơ Bé Bổng</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-start: #f7dfc6;
      --bg-end: #e8b89f;
      --screen-top: #fff5e7;
      --screen-bottom: #ffe8d6;
      --paper: #fffdf8;
      --ink: #4d2f24;
      --accent: #bb4d37;
      --accent-strong: #8d2f21;
      --soft-shadow: 0 18px 45px rgba(74, 38, 24, 0.2);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100dvh;
      display: grid;
      place-items: center;
      font-family: "Be Vietnam Pro", sans-serif;
      background: linear-gradient(150deg, var(--bg-start), var(--bg-end));
      color: var(--ink);
      overflow-x: hidden;
      overflow-y: auto;
    }

    body::before,
    body::after {
      content: "";
      position: fixed;
      width: 40vmax;
      height: 40vmax;
      border-radius: 50%;
      filter: blur(48px);
      z-index: -1;
    }

    body::before {
      background: rgba(244, 191, 145, 0.5);
      top: -12vmax;
      left: -8vmax;
      animation: drift 10s ease-in-out infinite alternate;
    }

    body::after {
      background: rgba(194, 104, 83, 0.28);
      right: -10vmax;
      bottom: -14vmax;
      animation: drift 12s ease-in-out infinite alternate-reverse;
    }

    @keyframes drift {
      from {
        transform: translate(0, 0) scale(1);
      }
      to {
        transform: translate(3vmax, -2vmax) scale(1.08);
      }
    }

    .scene {
      width: min(420px, 100vw);
      padding: 14px;
    }

    .screen {
      width: min(390px, 100%);
      height: min(844px, calc(100dvh - 28px));
      margin: 0 auto;
      border-radius: 26px;
      background:
        radial-gradient(circle at 18% 15%, rgba(255, 255, 255, 0.55) 0 22%, transparent 23%),
        linear-gradient(180deg, var(--screen-top), var(--screen-bottom));
      padding: calc(28px + env(safe-area-inset-top)) 22px calc(22px + env(safe-area-inset-bottom));
      position: relative;
      overflow-x: hidden;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      touch-action: pan-y;
      box-shadow: var(--soft-shadow);
    }

    .screen::before {
      content: "";
      position: absolute;
      inset: 0;
      background-image: radial-gradient(rgba(131, 61, 44, 0.09) 1px, transparent 1px);
      background-size: 14px 14px;
      pointer-events: none;
    }

    .content {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      gap: 14px;
      min-height: 100%;
      padding-right: 2px;
    }

    .title {
      font-family: "Playfair Display", serif;
      font-size: clamp(1.65rem, 6.2vw, 2rem);
      line-height: 1.2;
      text-align: center;
      color: var(--accent-strong);
      animation: fadeUp 700ms ease both;
    }

    .subtitle {
      text-align: center;
      font-size: 0.93rem;
      opacity: 0.82;
      animation: fadeUp 700ms ease 120ms both;
    }

    .txt-status {
      min-height: 18px;
      text-align: center;
      font-size: 0.8rem;
      color: #854135;
      opacity: 0.88;
    }

    .seal-btn {
      margin: 4px auto 0;
      border: none;
      background: linear-gradient(140deg, var(--accent), #d36d4d);
      color: #fff9f4;
      font-weight: 700;
      font-size: 0.95rem;
      padding: 12px 22px;
      border-radius: 999px;
      cursor: pointer;
      box-shadow: 0 10px 24px rgba(141, 47, 33, 0.34);
      transition: transform 200ms ease, box-shadow 200ms ease, filter 200ms ease;
      animation: beat 1.8s ease-in-out infinite;
    }

    .seal-btn:hover {
      transform: translateY(-2px);
      filter: saturate(1.05);
    }

    .seal-btn:active {
      transform: translateY(1px);
    }

    .seal-btn:disabled {
      opacity: 0.52;
      cursor: not-allowed;
      animation: none;
    }

    .letter {
      margin-top: 4px;
      background: var(--paper);
      border-radius: 20px;
      padding: 18px 16px;
      box-shadow: 0 10px 28px rgba(67, 31, 22, 0.15);
      transform-origin: top center;
      transform: scaleY(0.04) translateY(-35px);
      opacity: 0;
      max-height: 0;
      overflow: hidden;
      transition: transform 520ms ease, opacity 520ms ease;
    }

    .letter.is-open {
      transform: scaleY(1) translateY(0);
      opacity: 1;
      max-height: none;
      overflow: visible;
    }

    .line {
      font-size: 0.96rem;
      line-height: 1.56;
      margin-bottom: 10px;
      opacity: 0;
      transform: translateY(8px);
      transition: 420ms ease;
      white-space: pre-wrap;
    }

    .line.show {
      opacity: 1;
      transform: translateY(0);
    }

    .line-gap {
      height: 10px;
    }

    .cta {
      margin-top: 14px;
      width: 100%;
      border: none;
      border-radius: 12px;
      padding: 12px;
      font-weight: 700;
      background: #ffe5cf;
      color: var(--accent-strong);
      cursor: pointer;
      transition: transform 180ms ease, background 180ms ease;
    }

    .cta:hover {
      transform: translateY(-1px);
      background: #ffdcc0;
    }

    .message {
      min-height: 26px;
      text-align: center;
      font-size: 0.92rem;
      font-weight: 500;
      color: #7d3023;
      opacity: 0;
      transform: translateY(6px);
      transition: 350ms ease;
    }

    .message.show {
      opacity: 1;
      transform: translateY(0);
    }

    .heart-field {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 3;
    }

    .heart {
      position: absolute;
      bottom: -30px;
      font-size: 18px;
      animation: floatUp 3.6s linear forwards;
      opacity: 0.78;
    }

    @keyframes floatUp {
      from {
        transform: translateY(0) scale(0.8);
        opacity: 0.85;
      }
      to {
        transform: translateY(-110vh) scale(1.35);
        opacity: 0;
      }
    }

    @keyframes beat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.04); }
    }

    @keyframes fadeUp {
      from {
        opacity: 0;
        transform: translateY(12px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 430px) {
      .scene {
        padding: 0;
        width: 100vw;
      }

      .screen {
        width: 100vw;
        height: 100dvh;
        border-radius: 0;
        box-shadow: none;
      }
    }
  </style>
</head>
<body>
  <div class="scene">
    <main class="screen">
      <div class="heart-field" id="heartField"></div>
      <section class="content">
        <h1 class="title">Nghiệm Gửi Bơ Bé Bổng</h1>
        <p class="subtitle">Anh biết là em sẽ không thích đọc tin nhắn dài cho nên anh đã viết một bức thư gửi em</p>

        <button class="seal-btn" id="openBtn">Mở bức thư</button>

        <article class="letter" id="letter">
          <div id="letterBody"></div>
          <button class="cta" id="forgiveBtn">Cho chúng ta thêm một cơ hội</button>
        </article>

        <p class="message" id="message">Cảm ơn em đã đọc hết bức thư này.</p>
      </section>
    </main>
  </div>
  <audio id="openAudio" preload="auto" loop src="src/diudang.mp3"></audio>

  <script>
    const openBtn = document.getElementById("openBtn");
    const letter = document.getElementById("letter");
    const letterBody = document.getElementById("letterBody");
    const forgiveBtn = document.getElementById("forgiveBtn");
    const message = document.getElementById("message");
    const heartField = document.getElementById("heartField");
    const openAudio = document.getElementById("openAudio");

    const defaultText = `Gửi Bơ,
Hôm nay anh muốn nói hết những gì trong lòng anh.
Anh biết có thể em không thích đọc những tin nhắn dài, nhưng đây là tất cả những gì anh đã giữ trong lòng suốt thời gian qua. 
Anh chỉ hy vọng em đọc, không phải để tỏ ra mình đáng thương hay thương hại, mà anh muốn em hiểu rằng anh đã nghiêm túc với mối quan hệ này như thế nào.
Sự im lặng của anh không phải vì anh vô tâm, cũng không phải vì anh không đau. Ngược lại, anh đã rất đau. Anh đã không ăn, không ngủ được trong rất nhiều ngày. Trong đầu anh lúc nào cũng chỉ muốn đến gặp em ngay lập tức để ôm em thật chặt và giải quyết cùng nhau vấn đề này. Nhưng anh đã chọn kìm lại, vì anh hiểu lúc này nếu anh đến hay làm áp lực cho em trong lúc này sẽ có thể làm em sợ. Anh chưa bao giờ muốn người con gái của mình cảm thấy sợ hay cảm thấy không an toàn, dù chỉ một chút khi ở bên anh. 
Vì vậy anh đã chọn im lặng, và dành thời gian để nhìn lại tất cả — từng kỷ niệm, từng khoảnh khắc, chặn đường của tụi mình
Anh đã từng làm em khóc, 
và thật sự đến bây giờ anh vẫn còn đau lòng và áy náy về điều đó. 
Anh đã hứa với em là sẽ không có lần sau, và gần như lúc nào trong lòng anh cũng tự nhắc bản thân rằng sẽ không để em phải tổn thương thêm một lần nào nữa.
Từ sau lần đó, anh cẩn thận hơn rất nhiều trong từng hành vi để đồ đạc ở đâu, anh cũng đều nghĩ xem có ảnh hưởng đến em hay không. 
Mỗi lần em ngồi lên xe, anh không còn chạy một tay nữa, trong đầu anh luôn tự đặt cho mình giới hạn chỉ chạy khoảng 35–45km/h, 
và anh chưa bao giờ vượt quá điều đó, 
vì anh không muốn em bị lặp lại tình huống đó thêm một lần nào nữa. 
Có thể thời gian mình quen nhau chưa đủ dài, nhưng đến hiện tại anh chưa từng thất hứa với em lần nào.
 Chỉ cần điều gì có thể làm em tổn thương hoặc ảnh hưởng đến mối quan hệ của mình, anh sẵn sàng thay đổi.
Anh nghĩ một mối quan hệ tốt là khi cả hai đều được sống đúng với con người thật của mình. 
Nhưng nếu có những thói quen, hành vi hay quan điểm chưa tốt, hoặc vô tình ảnh hưởng đến người kia, thì anh sẵn sàng nhìn lại và thay đổi để người mình thương không phải khó chịu hay ấm ức trong lòng.
Thực tế thì không ai mới gặp mà có thể hiểu hết tính cách hay hoàn toàn hòa hợp quan điểm với nhau ngay từ đầu. 
Có những thứ là quan điểm, là thói quen, thì hoàn toàn có thể thay đổi theo thời gian. 
Quan trọng là mình thay đổi vì thấy nó tốt hơn cho bản thân và cho mối quan hệ, chứ không phải vì chiều theo một cách mù quáng.
Em biết không bây giờ anh đã bắt đầu nhìn những em bé bằng một con mắt khác và anh đã có thể chơi với mấy bé con nít trong chung cư rồi đó, 
Trước đây anh luôn có quan điểm rằng sau khi chia tay, anh và người cũ vẫn có thể làm bạn bình thường. Vì vậy nên anh vẫn giữ họ trong danh sách bạn bè, và tất cả họ cũng đều đã có người yêu mới và cuộc sống riêng.
Nhưng từ khi anh biết điều đó khiến em không thoải mái và không thích, anh đã suy nghĩ lại. Anh nhận ra cảm xúc của em quan trọng hơn những quan điểm cũ của anh. Vì vậy, anh đã chủ động chặn và không còn giữ liên lạc với tất cả những người cũ nữa.
Anh làm điều đó không phải vì bị ép buộc, mà vì anh tôn trọng em và tôn trọng mối quan hệ này.
hay là thói quen đi dép lê, quan điểm về trường công trường tư tất nhiên là anh tự về tự suy nghĩ kiểm chứng lại à anh thấy đó là những thói quen tốt và mình nên thay đổi chứ không phải là à vì em thích nên là anh theo bất chấp, 
nếu như anh kiểm chứng lại thấy quan điểm nào đó của em không phù hợp thì một ngày nào đó anh sẽ ngồi lại và phân tích lại với em chổ đó. 
Anh cũng đã xem lại quan điểm mua xe trước mua nhà của em, anh cũng đã nghiên cứu lại ngành, vị trí của em và anh thấy nó hợp lý và cần tạo niềm tin và uy tín trong tình huống này
Anh không dám hứa điều gì quá xa, cũng không dám nói trước tương lai sẽ như thế nào. Nhưng anh biết chắc một điều, tình cảm anh dành cho em là thật, và anh luôn trân trọng những gì tụi mình đã có.
Anh không nói những điều này để kể khổ hay để em cảm thấy áp lực. Anh chỉ muốn em biết rằng, với anh, mọi thứ chưa từng là trò đùa. Anh đã quan sát, ghi nhớ từng tính cách, từng thói quen, từng sở thích của em. Và anh cũng đã nhìn lại chính mình, nhìn lại những sai lầm mà anh đã gây ra, những lúc anh chưa đủ tinh tế, chưa đủ trưởng thành để bảo vệ cảm xúc của em.
Anh hy vọng khi năm cũ khép lại, năm mới có thể cho tụi mình một cơ hội để bắt đầu lại. Không phải là quay về những gì đã từng, mà là cùng nhau bắt đầu một hành trình mới — chậm rãi hơn, trưởng thành hơn, dịu dàng hơn và thấu hiểu nhau hơn.
Anh mong rằng lần này, tụi mình sẽ học được cách lắng nghe nhau nhiều hơn, tôn trọng cảm xúc của nhau nhiều hơn, và cùng nhau đặt ra những ranh giới rõ ràng để cả hai đều cảm thấy an toàn và được trân trọng trong mối quan hệ này.

Thương em,
Nghiệm`;

    let lines = [];
    let letterOpened = false;

    function renderLetterText(rawText) {
      const normalized = rawText.replace(/\r\n/g, "\n").trim();
      const segments = normalized.length ? normalized.split("\n") : [];
      letterBody.innerHTML = "";

      if (!segments.length) {
        const fallback = document.createElement("p");
        fallback.className = "line";
        fallback.textContent = "Nội dung thư đang trống.";
        letterBody.appendChild(fallback);
      } else {
        segments.forEach((segment) => {
          if (!segment.trim()) {
            const gap = document.createElement("div");
            gap.className = "line-gap";
            letterBody.appendChild(gap);
            return;
          }

          const line = document.createElement("p");
          line.className = "line";
          line.textContent = segment.trim();
          letterBody.appendChild(line);
        });
      }

      lines = Array.from(letterBody.querySelectorAll(".line"));

      if (letterOpened) {
        lines.forEach((line, index) => {
          setTimeout(() => line.classList.add("show"), index * 120);
        });
      }
    }

    function releaseHeart(burst = 1) {
      for (let i = 0; i < burst; i += 1) {
        const heart = document.createElement("span");
        heart.className = "heart";
        heart.textContent = "\u2764";
        heart.style.left = `${8 + Math.random() * 82}%`;
        heart.style.fontSize = `${14 + Math.random() * 14}px`;
        heart.style.animationDuration = `${2.8 + Math.random() * 1.8}s`;
        heart.style.animationDelay = `${i * 80}ms`;
        heartField.appendChild(heart);
        setTimeout(() => heart.remove(), 4200);
      }
    }

    openBtn.addEventListener("click", () => {
      if (openAudio) {
        openAudio.currentTime = 0;
        openAudio.play().catch(() => {});
      }

      openBtn.disabled = true;
      openBtn.textContent = "Bức thư đã mở";
      letter.classList.add("is-open");
      message.classList.add("show");
      letterOpened = true;

      lines.forEach((line, index) => {
        setTimeout(() => {
          line.classList.add("show");
        }, 300 + index * 370);
      });

      releaseHeart(8);
    });

    forgiveBtn.addEventListener("click", () => {
      message.textContent = "Anh không hứa sẽ hoàn hảo 100%, nhưng anh hứa anh sẽ luôn cố gắng, luôn lắng nghe, và luôn chọn và tôn trọng giới hạn của em — một cách rõ ràng và nghiêm túc.";
      message.classList.add("show");
      releaseHeart(14);
    });

    renderLetterText(defaultText);
  </script>
</body>
</html>
